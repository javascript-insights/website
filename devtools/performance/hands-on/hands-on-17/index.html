<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JavaScript Insights</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="./styles.css" />
  <link rel="icon" type="image/png" href="/static/favicon.png" />
  <script src="index.js"></script>
</head>

<body>
  <h1>Performance Hands-On 17 - Tracking iframe Communication</h1>
  <nav class="breadcrumb">
    <a href="../../../../../index.html">JavaScript Insights</a>
    <a href="../../../../index.html">DevTools</a>
    <a href="../../index.html">Performance</a>
    <a href="../index.html">Hands-On</a>
    <a href="./index.html">Iframe</a>
  </nav>
  <div class="navbar">
    <a href="../index.html">Back</a>
  </div>

  <div class="content">
    <div class="instructions">
      <h2>What You'll Learn</h2>
      <p>In this exercise, you'll learn how to use the Performance tool to track and analyze communication between a
        main page and an iframe using <code>postMessage</code>.</p>

      <h2>Instructions</h2>
      <ol>
        <li>Open DevTools (F12 or Ctrl+Shift+I / Cmd+Option+I)</li>
        <li>Go to the "Performance" tab</li>
        <li>Click the "Record" button (âš«) to start recording</li>
        <li>Click the "Send message to iframe" button below several times</li>
        <li>Click the "Send message to main frame" button in the iframe several times</li>
        <li>Stop the recording by clicking the "Stop" button in DevTools</li>
      </ol>

      <h2>What to Look For in the Performance Panel</h2>
      <ul>
        <li>Find the "Main" section in the trace and expand it</li>
        <li>Look for <code>postMessage</code> events in the timeline</li>
        <li>Click on a <code>postMessage</code> event to see details about:
          <ul>
            <li>The message content</li>
            <li>The origin of the message</li>
            <li>The timing between sending and processing the message</li>
          </ul>
        </li>
        <li>Notice how messages are represented as arrows between frames in the timeline</li>
      </ul>
    </div>

    <div class="demo-area">
      <h2>iframe Communication Demo</h2>
      <p>
        This demo demonstrates how <code>postMessage</code> communication between frames appears in a performance trace.
      </p>

      <div class="control-panel">
        <button id="sendMessage" class="button">Send message to iframe</button>
        <p id="main-frame-result-text">Received 0 messages</p>
      </div>

      <iframe src="./iframe.html" class="demo-iframe"></iframe>
    </div>
  </div>
</body>

</html>